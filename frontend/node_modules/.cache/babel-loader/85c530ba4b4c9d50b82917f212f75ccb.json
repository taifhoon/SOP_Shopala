{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"@/plugins/axios\";\nexport default {\n  name: \"app\",\n  props: [\"user\"],\n  data: function data() {\n    return {\n      customer: \"\",\n      customerDetail: \"\",\n      orderDetail: \"\",\n      customerModal: false,\n      search: \"\"\n    };\n  },\n  mounted: function mounted() {\n    window.scrollTo(0, 0);\n    this.getCustomer();\n  },\n  methods: {\n    getCustomer: function getCustomer() {\n      var _this = this;\n\n      axios.get(\"http://localhost:3000/customer/\", {\n        params: {\n          search: this.search\n        }\n      }).then(function (response) {\n        _this.customer = response.data.customer;\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    getOrder: function getOrder(id) {\n      var _this2 = this;\n\n      axios.get(\"http://localhost:3000/customer/detail/\".concat(id)).then(function (response) {\n        _this2.orderDetail = response.data.order;\n\n        for (var i = 0; i < _this2.orderDetail.length; i++) {\n          _this2.orderDetail[i].show_date = new Date(_this2.orderDetail[i].show_date).toDateString();\n        }\n\n        _this2.customerDetail = response.data.customer[0];\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    image: function image(file_path) {\n      if (file_path) {\n        return \"http://localhost:3000/\" + file_path;\n      } else {\n        return \"https://bulma.io/images/placeholders/640x360.png\";\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AACA;AACAA,aADA;AAEAC,iBAFA;AAGAC,MAHA,kBAGA;AACA;AACAC,kBADA;AAEAC,wBAFA;AAGAC,qBAHA;AAIAC,0BAJA;AAKAC;AALA;AAOA,GAXA;AAYAC,SAZA,qBAYA;AACAC;AACA;AACA,GAfA;AAgBAC;AACAC,eADA,yBACA;AAAA;;AACAC,YACAC,GADA,oCACA;AAAAC;AACAP;AADA;AAAA,OADA,EAGAQ,IAHA,CAGA;AACA;AACA,OALA,EAMAC,KANA,CAMA;AACAC;AACA,OARA;AASA,KAXA;AAYAC,YAZA,oBAYAC,EAZA,EAYA;AAAA;;AACAP,YACAC,GADA,iDACAM,EADA,GAEAJ,IAFA,CAEA;AACA;;AACA;AACA;AACA;;AACA;AAEA,OATA,EAUAC,KAVA,CAUA;AACAC;AACA,OAZA;AAaA,KA1BA;AA2BAG,SA3BA,iBA2BAC,SA3BA,EA2BA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AAjCA;AAhBA","names":["name","props","data","customer","customerDetail","orderDetail","customerModal","search","mounted","window","methods","getCustomer","axios","get","params","then","catch","console","getOrder","id","image","file_path"],"sourceRoot":"src/views","sources":["AllCustomer.vue"],"sourcesContent":["<template>\r\n  <section class=\"section\" id=\"app\">\r\n    <div class=\"content\">\r\n      <p class=\"title has-text-white\">ข้อมูลลูกค้า</p>\r\n      <div class=\"columns is-multiline\">\r\n        <div class=\"column is-10\">\r\n          <input\r\n            class=\"input is-danger\"\r\n            type=\"text\"\r\n            v-model=\"search\"\r\n            placeholder=\"Customer Name, Movie Order\"\r\n          />\r\n        </div>\r\n        <div class=\"column is-2\">\r\n          <button\r\n            @click=\"getCustomer()\"\r\n            class=\"button px-3 is-danger is-fullwidth\"\r\n          >\r\n            <strong>Search</strong>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"column m-5\">\r\n        <div class=\"field level-right\">\r\n          <div class=\"control\"></div>\r\n        </div>\r\n        <table\r\n          class=\"table is-bordered has-background-warning-dark has-text-white\"\r\n        >\r\n          <tr>\r\n            <td>ไอดี</td>\r\n            <td>อีเมลล์</td>\r\n            <td>ชื่อ</td>\r\n            <td>เบอร์โทรศัพท์</td>\r\n            <td>จำนวนรายการสั่งซื้อ</td>\r\n            <td>ดูข้อมูล</td>\r\n          </tr>\r\n          <tr\r\n            v-for=\"customer in customer\"\r\n            :key=\"customer.cid\"\r\n            class=\"has-background-warning-light has-text-black\"\r\n          >\r\n            <td>{{ customer.cid }}</td>\r\n            <td>{{ customer.email_id }}</td>\r\n            <td>{{ customer.c_name }}</td>\r\n            <td>{{ customer.phone_no }}</td>\r\n            <td>{{ customer.order }}</td>\r\n            <td>\r\n              <button\r\n                class=\"button is-success\"\r\n                @click=\"(customerModal = true), getOrder(customer.cid)\"\r\n              >\r\n                รายละเอียด\r\n              </button>\r\n            </td>\r\n            <div class=\"modal\" :class=\"{ 'is-active': customerModal }\">\r\n              <div class=\"modal-background\"></div>\r\n              <div class=\"modal-card\" style=\"width:80%\">\r\n                <header class=\"modal-card-head\">\r\n                  <div class=\"column\">\r\n                    <div class=\"column\">\r\n                      <p>ช้อมูลลูกค้าไอดี {{ customerDetail.cid }}</p>\r\n                      <div class=\"column is-6 has-text-left\">\r\n                        <p>ไอดี: {{ customerDetail.cid }}</p>\r\n                        <p>อีเมลล์: {{ customerDetail.email_id }}</p>\r\n                        <p>ชื่อ: {{ customerDetail.c_name }}</p>\r\n                        <p>เบอร์โทรศัพท์: {{ customerDetail.phone_no }}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </header>\r\n                <section class=\"modal-card-body modal-content-width\">\r\n                    <p class=\"title\">รายการคำสั่งซื้อทั้งหมด</p>\r\n                        <table>\r\n                            <tr>\r\n                                <td>รายการคำสั่งซื้อที่</td>\r\n                                <td>ที่นั่ง</td>\r\n                                <td>ราคารวม</td>\r\n                                <td>โรงหนัง</td>\r\n                                <td>ชื่อหนัง</td>\r\n                                <td>รอบฉายที่</td>\r\n                                <td>วันที่ฉาย</td>\r\n                                <td>เวลาเริ่ม</td>\r\n                            </tr>\r\n                            <tr v-for=\"order in orderDetail\" :key=\"order.order_id\">\r\n                                <td>{{order.order_id}}</td>\r\n                                <td>{{order.order_seats}}</td>\r\n                                <td>{{order.total_price}}</td>\r\n                                <td>{{order.tname}}</td>\r\n                                <td>{{order.m_name}}</td>\r\n                                <td>{{order.show_id}}</td>\r\n                                <td>{{order.show_date}}</td>\r\n                                <td>{{order.st_time}}</td>\r\n                            </tr>\r\n                            <tr v-if=\"orderDetail.length == 0\">\r\n                                <td>-</td>\r\n                                <td>-</td>\r\n                                <td>-</td>\r\n                                <td>-</td>\r\n                                <td>-</td>\r\n                                <td>-</td>\r\n                                <td>-</td>\r\n                                <td>-</td>\r\n                            </tr>\r\n                        </table>\r\n                </section>\r\n                <footer class=\"modal-card-foot\">\r\n                  <button\r\n                    @click=\"customerModal = false\"\r\n                    class=\"button is-success\"\r\n                  >\r\n                    ออก\r\n                  </button>\r\n                </footer>\r\n              </div>\r\n            </div>\r\n          </tr>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n<script>\r\nimport axios from \"@/plugins/axios\";\r\nexport default {\r\n  name: \"app\",\r\n  props: [\"user\"],\r\n  data() {\r\n    return {\r\n      customer: \"\",\r\n      customerDetail: \"\",\r\n      orderDetail: \"\",\r\n      customerModal: false,\r\n      search: \"\"\r\n    };\r\n  },\r\n  mounted() {\r\n    window.scrollTo(0, 0);\r\n    this.getCustomer();\r\n  },\r\n  methods: {\r\n    getCustomer() {\r\n      axios\r\n        .get(`http://localhost:3000/customer/`, {          params: {\r\n            search: this.search}})\r\n        .then((response) => {\r\n          this.customer = response.data.customer;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    getOrder(id) {\r\n      axios\r\n        .get(`http://localhost:3000/customer/detail/${id}`)\r\n        .then((response) => {\r\n          this.orderDetail = response.data.order;\r\n          for (var i=0; i<this.orderDetail.length; i++){\r\n              this.orderDetail[i].show_date = new Date(this.orderDetail[i].show_date).toDateString()\r\n          }\r\n          this.customerDetail = response.data.customer[0];\r\n\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    image(file_path){\r\n        if (file_path) {\r\n        return \"http://localhost:3000/\" + file_path;\r\n      } else {\r\n        return \"https://bulma.io/images/placeholders/640x360.png\";\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}