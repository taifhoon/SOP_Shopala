{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from '@/plugins/axios';\nexport default {\n  data: function data() {\n    return {\n      moviedetail: [],\n      m_name: \"\",\n      t_name: \"\",\n      show_date: \"\",\n      language: \"ENG\",\n      st_time: \"\",\n      end_time: \"\"\n    };\n  },\n  mounted: function mounted() {\n    window.scrollTo(0, 0);\n    this.getShow(this.$route.params.id);\n  },\n  methods: {\n    getShow: function getShow(id) {\n      var _this = this;\n\n      axios.get(\"http://localhost:3000/edit/show/\".concat(id)).then(function (response) {\n        _this.moviedetail = response.data.show[0];\n        _this.m_name = response.data.show[0].m_name;\n        console.log(_this.m_name);\n        _this.t_name = response.data.show[0].tname;\n        _this.st_time = response.data.show[0].st_time;\n        _this.end_time = response.data.show[0].end_time;\n        _this.language = response.data.show[0].language;\n        _this.show_date = response.data.show[0].show_date;\n\n        var date = _this.show_date.split('T')[0].split('-');\n\n        _this.show_date = date[0] + '-' + date[1] + '-' + (parseInt(date[2]) + 1);\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    submitShow: function submitShow() {\n      var _this2 = this;\n\n      axios.post(\"http://localhost:3000/edit/show/\".concat(this.$route.params.id), {\n        show_date: this.show_date,\n        language: this.language,\n        st_time: this.st_time,\n        end_time: this.end_time\n      }).then(function (response) {\n        console.log(response);\n\n        _this2.$router.push({\n          path: \"/movies/detail/\".concat(_this2.moviedetail.m_id)\n        });\n      }).catch(function (error) {\n        _this2.error = error.message;\n      });\n    },\n    image: function image(file_path) {\n      if (file_path) {\n        return \"http://localhost:3000/\" + file_path;\n      } else {\n        return \"https://bulma.io/images/placeholders/640x360.png\";\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AAEA;AACAA,MADA,kBACA;AACA;AACAC,qBADA;AAEAC,gBAFA;AAGAC,gBAHA;AAIAC,mBAJA;AAKAC,qBALA;AAMAC,iBANA;AAOAC;AAPA;AASA,GAXA;AAYAC,SAZA,qBAYA;AACAC;AACA;AACA,GAfA;AAgBAC;AACAC,WADA,mBACAC,EADA,EACA;AAAA;;AACAC,YACAC,GADA,2CACAF,EADA,GAEAG,IAFA,CAEA;AACA;AACA;AACAC;AACA;AACA;AACA;AACA;AACA;;AACA;;AACA;AACA,OAbA,EAcAC,KAdA,CAcA;AACAD;AACA,OAhBA;AAiBA,KAnBA;AAoBAE,cApBA,wBAoBA;AAAA;;AACAL,YACAM,IADA,2CACA,qBADA,GACA;AACAf,iCADA;AAEAC,+BAFA;AAGAC,6BAHA;AAIAC;AAJA,OADA,EAOAQ,IAPA,CAOA;AACAC;;AACA;AAAAI;AAAA;AACA,OAVA,EAWAH,KAXA,CAWA;AACA;AACA,OAbA;AAcA,KAnCA;AAoCAI,SApCA,iBAoCAC,SApCA,EAoCA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AA1CA;AAhBA","names":["data","moviedetail","m_name","t_name","show_date","language","st_time","end_time","mounted","window","methods","getShow","id","axios","get","then","console","catch","submitShow","post","path","image","file_path"],"sourceRoot":"src/views","sources":["UpdateShow.vue"],"sourcesContent":["<template>\r\n  <div class=\"container is-widescreen\">\r\n    <div class=\"columns pb-5\">\r\n      <div class=\"column box mx-5 mb-5 has-background-grey-dark\">\r\n        <section class=\"hero\">\r\n          <div class=\"hero-body\">\r\n            <p class=\"title has-text-white\">Edit New Show</p>\r\n          </div>\r\n        </section>\r\n        <section class=\"px-6\">\r\n          <div class=\"columns\">\r\n          <div class=\"column\">\r\n              <div class=\"field mt-5\">\r\n                <label class=\"label has-text-white\">ชื่อหนัง</label>\r\n                <div class=\"control\">\r\n                  <div class=\"select is-normal\" style=\"left: 0;\">\r\n                        <select v-model=\"m_name\" disabled>\r\n                            <option>{{m_name}}</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"field mt-5\">\r\n                <label class=\"label has-text-white\">วันที่ฉาย</label>\r\n                <div class=\"control\">\r\n                  <input style=\"width: 380px; height: 40px;\" type=\"date\" id=\"date\" name=\"Date\" v-model=\"show_date\">\r\n                </div>\r\n              </div>\r\n              <div class=\"field mt-5\">\r\n                <label class=\"label has-text-white\">เวลาจบฉาย</label>\r\n                <div class=\"control \">\r\n                  <input style=\"width: 380px; height: 40px;\" type=\"time\" v-model=\"end_time\" id=\"start_show\" name=\"start_show\" min=\"00:00\" max=\"23:59\">\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"column\">\r\n              <div class=\"field mt-5\">\r\n                <label class=\"label has-text-white\">โรงหนัง</label>\r\n                <div class=\"control\">\r\n                  <div class=\"select is-normal\">\r\n                        <select v-model=\"t_name\" style=\"width: 380px; height: 40px;\" disabled>\r\n                            <option>{{t_name}}</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"field mt-5\">\r\n                <label class=\"label has-text-white\">เวลาเริ่มฉาย</label>\r\n                <div class=\"control\">\r\n                  <input style=\"width: 380px; height: 40px;\" type=\"time\" v-model=\"st_time\" id=\"start_show\" name=\"start_show\" min=\"00:00\" max=\"23:59\">\r\n                </div>\r\n              </div>\r\n              <div class=\"field mt-5\">\r\n                <label class=\"label has-text-white\">ภาษา</label>\r\n                <div class=\"control \">\r\n                  <div class=\"select is-normal\">\r\n                    <select v-model=\"language\" style=\"width: 380px; height: 40px;\">\r\n                      <option value=\"ENG\">ENG</option>\r\n                      <option value=\"TH\">TH</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              </div>\r\n              </div>\r\n              <div class=\"columns my-5 \">\r\n                <div class=\"column is-3\"></div>\r\n                <div class=\"column is-3\">\r\n                  <div class=\"field mt-5\">\r\n                    <div class=\"control\">\r\n                      <button @click=\"submitShow()\" class=\"button is-danger\" style=\"width: 200px; height: 40px;\">Submit</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"column is-3\">\r\n                  <div class=\"field mt-5\">\r\n                    <div class=\"control\">\r\n                    <router-link :to=\"`/movies/detail/${this.moviedetail.m_id}`\" class=\"has-text-light\">\r\n                        <button class=\"button is-danger is-light\" style=\"width: 200px; height: 40px;\">Cancel</button>\r\n                      </router-link>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"column is-3\"></div>\r\n              </div>\r\n        </section>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n    \r\n</template>\r\n\r\n<script>\r\nimport axios from '@/plugins/axios'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n        moviedetail: [],\r\n        m_name: \"\",\r\n        t_name: \"\",\r\n        show_date: \"\",\r\n        language: \"ENG\",\r\n        st_time: \"\",\r\n        end_time: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    window.scrollTo(0, 0)\r\n    this.getShow(this.$route.params.id)\r\n  },\r\n  methods: {\r\n      getShow(id) {\r\n      axios\r\n        .get(`http://localhost:3000/edit/show/${id}`)\r\n        .then((response) => {\r\n          this.moviedetail =  response.data.show[0]\r\n          this.m_name = response.data.show[0].m_name\r\n          console.log(this.m_name)\r\n          this.t_name = response.data.show[0].tname;\r\n          this.st_time = response.data.show[0].st_time;\r\n          this.end_time = response.data.show[0].end_time;\r\n          this.language = response.data.show[0].language;\r\n          this.show_date = response.data.show[0].show_date;\r\n          var date = this.show_date.split('T')[0].split('-')\r\n          this.show_date = date[0]+'-'+date[1]+'-'+(parseInt(date[2])+1)\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n      submitShow() {\r\n          axios\r\n            .post(`http://localhost:3000/edit/show/${this.$route.params.id}`, {\r\n                show_date: this.show_date,\r\n                language: this.language,\r\n                st_time: this.st_time,\r\n                end_time: this.end_time\r\n            })\r\n            .then((response) => {\r\n              console.log(response)\r\n              this.$router.push({ path: `/movies/detail/${this.moviedetail.m_id}` });\r\n            })\r\n            .catch((error) => {\r\n                this.error = error.message;\r\n            });\r\n      },\r\n      image(file_path){\r\n        if (file_path) {\r\n        return \"http://localhost:3000/\" + file_path;\r\n      } else {\r\n        return \"https://bulma.io/images/placeholders/640x360.png\";\r\n      }\r\n    }, \r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]},"metadata":{},"sourceType":"module"}